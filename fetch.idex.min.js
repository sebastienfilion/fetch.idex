/*!
* IDeX Fetch: Simple template fetcher v0.1.0
* http://idesignexperiences.com/#custom-form-element
*
* Copyright 2013, 2014 SÃ©bastien Filion me@idesignexperiences.com
* Released under the MIT license
*
* Built on: 2014/02/15
*
*/

!function(a,b,c,d){a.render=function(a,c){return b.Mustache.render(a,c)},a.fetch=function(c,e){function f(){function e(){j.hasOwnProperty("callback")&&(j.callback.hasOwnProperty("before")?j.callback.before.apply(b,[i]):a.parse(j.templates.loader,{callback:function(a){h=a}}))}function f(a){this.cache[k]=d,g.apply(this,[a])}function l(){j.hasOwnProperty("callback")&&(j.callback.hasOwnProperty("error")?j.callback.error.apply(b,[i]):g.apply(this,[j.templates.error]))}function m(){j.hasOwnProperty("callback")&&(j.callback.hasOwnProperty("complete")?j.callback.complete.apply(b,[i]):h&&h.remove())}$.ajax({type:"GET",url:c,context:this,beforeSend:e,success:f,error:l,complete:m})}function g(d){d=d||c,j.$parent!==!1&&(i=$(a.render(d,j.content||{})),"after"===j.hook?j.$parent.append(i):"before"===j.hook&&j.$parent.prepend(i)),this.cache.hasOwnProperty(k)&&"undefined"==typeof this.cache[k]&&(this.cache[k]=d),j.hasOwnProperty("callback")&&(j.callback.hasOwnProperty("success")?j.callback.success.apply(b,[i]):"function"==typeof j.callback&&j.callback.apply(b,[i]))}this.cache=this.cache||{},this.templates=this.template||{error:"<span>Error</span>",loader:"<span>Loading</span>"};var h,i,j,k;j=this.configs||{$parent:$("body").eq(0),hook:"after"},j.templates=this.templates,$.extend(j,e),/<\/\w+>/.test(c)||i?g.apply(this):(k=c.replace(/[\/\.]/g,""),this.cache.hasOwnProperty(k)?g.apply(this,[this.cache[k]]):f.apply(this))}}(window.idex=window.idex||{},window,document);